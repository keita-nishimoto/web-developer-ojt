# 課題4（ユーザー情報を表示させる）

他の課題と同様に [ojt-php](https://github.com/keitakn/ojt-php) をベースに開発を進めて行きましょう。

この課題で作成するのはログイン中のユーザー情報を表示させる機能になります。

## アウトプット

`GET /users/1 HTTP/1.1` or `GET /users/1 HTTP/2.0` にアクセスした際、対象ユーザーのメールアドレスを表示させるプログラムを作成して下さい。

## 完了条件

以下の仕様を満たすようにシステムを実装して下さい。

- ログイン状態でのみ閲覧出来るページになっている事
- 非ログイン状態の場合、ログインページへリダイレクトする事
- URL部分を他ユーザーの物に置き換えられた場合、情報を表示させないようになっている事

## ヒント

この課題は一見簡単そうに見えますが、以下のようなケースが起こると重大なセキュリティホールを作る事になるので注意する必要があります。

1. ユーザーID `1` のユーザーがログイン
2. ユーザーID `1` のユーザーで `GET /users/2 HTTP/1.1` にアクセスする

この時にユーザーID `2` の情報を表示させてはいけません。

この状態を許すという事は他ユーザーの個人情報が見れるという事です。

アプリケーションを実装するエンジニアとしては絶対起こしてはいけないミスです。

これを起こさない設計を考える必要があります。

ポイントは認証と認可です。

- 認証（その人は誰か）
- 認可（その人にはどういう操作をする権限があるか）

[課題3（ログイン）](https://github.com/keitakn/web-developer-ojt/blob/master/docs/server-side-programming/PHP/task3.md) でログインセッションを発行しているハズなので、ログインセッションにこれらの情報を紐づけておく事です。

ユーザーID `1` のログインセッションはユーザーID `1` のユーザー情報を操作する権限しか持たない。という状況になっていればOKです。

## このレッスンで身につける事

- ログイン認証が必要なWebシステムの設計手法
- 認証と認可が必要なシステムの設計手法

## メンター向け

セキュリティホールがないか十分に設計レビューを行って下さい。
